
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Создание разделов с помощью fdisk - Hrafn.me</title>
  <meta name="author" content="Alexander 'Hrafn' Ivanov">

  
  <meta name="description" content="Временами ко мне заходят люди с поисковиком с запросами по поводу fdisk. Где-то в статьях упоминается эта команда. Но толком ничего у меня про нее не &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hrafn.me/2009/03/sozdanie-razdelov-s-pomoshhyu-fdisk">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/hrafnme" rel="alternate" title="Hrafn.me" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  <!-- Piwik --> 
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stat.alexfinn.eu/" : "http://stat.alexfinn.eu/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 3);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stat.alexfinn.eu/piwik.php?idsite=3" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft"></div>
  	<div id="logoText"></div>
  	<div id="logoRight"></div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Hrafn.me</a></h1>
  
    <h2>...</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/hrafnme" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hrafn.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/docs">Docs</a></li>
  <li><a href="/lpi">LPI</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Создание разделов с помощью Fdisk</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2009-03-03T00:00:00+03:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2009</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Временами ко мне заходят люди с поисковиком с запросами по поводу fdisk. Где-то в статьях упоминается эта команда. Но толком ничего у меня про нее не было.
А я помню, как в свое время мучался с ней :smile: Поскольку писать свое
собственное что-то мне очень часто посто лень, то я потихоньку перевожу
интересные и полезные для меня статьи. Вот и сейчас сделал то же самое. Может,
пригодится кому-то. Хотя, как всегда, статья далеко не целиком раскрывает
тему, а потому чтение манов никто не отменяет :mrgreen:</p>

<p>Итак, очередной перевод. Оригинал, как всегда, на <a href="http://www.novell.com/coolsolutions/feature/19350.html">Novell Cool Solutions</a>. Читайте.</p>

<!--more-->


<p>Создать разделы через интерфейс командной строки - просто и быстро, также
учитывая знание ядра о модифицированной таблице разделов и наличия схемы
разделов, позволяет получить нужный эффект без необходимости перезагрузки
рабочей станции/сервера и без необходимости использовать утилиты для
разделения.</p>

<p>Первым делом необходимо посмотреть, какие жесткие диски доступны, и какой
жесткий диск необходимо разделить. Если на вашей машине установлено несколько
жестких дисков, fdisk сообщит вам об этом. Два жестких диска показано в
следующем листинге как sda и sdb.</p>

<p>Команда fdisk с оператором -l (fdisk -l) покажет вам текущие таблицы разделов
наряду с жесткими дисками, подключенными к вашей рабочей станции или серверу:</p>

<pre><code>    linux-1reo:~ # fdisk -l

    Disk /dev/sda: 80.0 GB, 80026361856 bytes 255 heads, 63 sectors/track, 9729 cylinders
    Units = cylinders of 16065 * 512 = 8225280 bytes

    Device Boot Start End Blocks Id System
    /dev/sda1 * 1 1402 11261533+ 7 HPFS/NTFS
    /dev/sda2 1403 1415 104422+ 83 Linux
    /dev/sda3 1416 1546 1052257+ 82 Linux swap / Solaris
    /dev/sda4 1547 9729 65729947+ 5 Extended
    /dev/sda5 1547 7920 51199123+ 8e Linux LVM

    Disk /dev/sdb: 80.0 GB, 80026361856 bytes
    255 heads, 63 sectors/track, 9729 cylinders
    Units = cylinders of 16065 * 512 = 8225280 bytes

    Device Boot Start End Blocks Id System
    /dev/sdb1 * 1 9729 78148161 8e Linux LVM

    Disk /dev/sdc: 500.1 GB, 500107862016 bytes
    255 heads, 63 sectors/track, 60801 cylinders
    Units = cylinders of 16065 * 512 = 8225280 bytes
</code></pre>

<p>Как только вы определили, какой жесткий диск вы хотите разделить, вы можете
запустить команду fdisk, завершив ее нужным жестким диском (fdisk /dev/sda). В
этой статье мы будем использовать первый жесткий диск - <strong>sda</strong>.</p>

<pre><code>    linux-1reo:~ # fdisk /dev/sda
    The number of cylinders for this disk is set to 9729.
    There is nothing wrong with that, but this is larger than 1024,
    and could in certain setups cause problems with:
    1) software that runs at boot time (e.g., old versions of LILO)
    2) booting and partitioning software from other OSs
    (e.g., DOS FDISK, OS/2 FDISK)Command (m for help):
</code></pre>

<p>Как только fdisk будет запущен, ваше приглашение командной строки изменится на
“Command (m for help):“, и вы будете готовы к проверке и разделению жесткого
диска. Команды, которые поддерживает fdisk, можно просмотреть нажав клавишу <code>m</code>,
а затем Enter. Команды, которые мы будем использовать:</p>

<ul>
<li>p - для печати таблицы раздела</li>
<li>n - для создания нового раздела</li>
<li>w - для сохранения изменений и выхода</li>
</ul>


<p><strong>Отображение текущей таблицы раздела</strong></p>

<p>Перед тем, как мы начнем делить жесткий диск, необходимо узнать какой объем
дискового пространства нам доступен и как вообще выгдялит текущая таблица
раздела. “p“, команда, которую мы будеи использовать, выведет текущую таблицу
раздела:</p>

<pre><code>    Command (m for help): p

    Disk /dev/sda: 80.0 GB, 80026361856 bytes
    255 heads, 63 sectors/track, 9729 cylinders
    Units = cylinders of 16065 * 512 = 8225280 bytes

    Device Boot Start End Blocks Id System
    /dev/sda1 * 1 1402 11261533+ 7 HPFS/NTFS
    /dev/sda2 1403 1415 104422+ 83 Linux
    /dev/sda3 1416 1546 1052257+ 82 Linux swap / Solaris
    /dev/sda4 1547 9729 65729947+ 5 Extended
    /dev/sda5 1547 7920 51199123+ 8e Linux LVM
</code></pre>

<p>Вывод, приведенный выше, показывает, что у нас доступно 1809 цилиндров (9729 -
7920 = 1809), и мы можем выполнить вычисление (1809 * 16065 * 512) =
14879531520байтов, что примерно равно 14 гигабайтов.</p>

<p><strong>Создание нового раздела</strong></p>

<p>Следующий шаг - создание нашего нового раздела. Для примера, мы создадим
раздел с типом “Linux” и размером 1 гигабайт. Мы используем команду “n” для
создания нового раздела. Нас спросят, с какого цилиндра будет начинаться
раздел (я советую оставить по умолчанию) и необходимый размер раздела:</p>

<pre><code>    Command (m for help): n
    First cylinder (7921-9729, default 7921):
    Using default value 7921
    Last cylinder or +size or +sizeM or +sizeK (7921-9729, default 9729): +1024M
</code></pre>

<p>После того, как раздел будет создан, мы, используя команду “p“, можем
отобразить на экране нашу новую таблицу раздела:</p>

<pre><code>    Command (m for help): p

    Disk /dev/sda: 80.0 GB, 80026361856 bytes
    255 heads, 63 sectors/track, 9729 cylinders
    Units = cylinders of 16065 * 512 = 8225280 bytes

    Device Boot Start End Blocks Id System
    /dev/sda1 * 1 1402 11261533+ 7 HPFS/NTFS
    /dev/sda2 1403 1415 104422+ 83 Linux
    /dev/sda3 1416 1546 1052257+ 82 Linux swap / Solaris
    /dev/sda4 1547 9729 65729947+ 5 Extended
    /dev/sda5 1547 7920 51199123+ 8e Linux LVM
    /dev/sda6 7921 8045 1004031 83 Linux
</code></pre>

<p><strong>Запись нового раздела на диск</strong></p>

<p>Теперь, когда раздел был успешно создан, вы можете записать изменения на диск,
нажав клавишу “w“, а затем Enter:</p>

<pre><code>    Command (m for help): w
    The partition table has been altered!

    Calling ioctl() to re-read partition table.

    WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
    The kernel still uses the old table.
    The new table will be used at the next reboot.
    Syncing disks.
</code></pre>

<p><strong>Активирование вновь созданного раздела</strong></p>

<p>Как только новая таблица раздела записана на жесткий диск, ядро имеет
возможность читать новую таблицу раздела без необходимости перезагрузки.
Первый шаг - создание точки монтирования для нового раздела, в нашем примере
мы будем использовать /media/newpart, а также использование команды
“partprobe” для того, чтобы ядро имело возможность перечитать таблицу раздела:</p>

<pre><code>    linux-1reo:~ # mkdir /media/newpart
    linux-1reo:~ # partprobe
</code></pre>

<p>Теперь, когда новая точка монтирования создана и ядро перечитало таблицу
раздела, вы можете отформатировать раздел и разместить на нем файловую систему
на ваш выбор (ext2, ext3, reiserfs и т.д.). В нашем примере, мы выбрали
reiserfs:</p>

<pre><code>    linux-1reo:~ # mkfs.reiserfs /dev/sda6
    mkfs.reiserfs 3.6.19 (2003 www.namesys.com)

    A pair of credits:
    The Defense Advanced Research Projects Agency (DARPA, www.darpa.mil) is the
    primary sponsor of Reiser4. DARPA does not endorse this project; it merely
    sponsors it.

    Alexander Lyamin keeps our hardware running, and was very generous to our
    project in many little ways.

    Guessing about desired format.. Kernel 2.6.16.21-0.8-default is running.
    Format 3.6 with standard journal
    Count of blocks on the device: 126496
    Number of blocks consumed by mkreiserfs formatting process: 8215
    Blocksize: 4096
    Hash function used to sort names: “r5″
    Journal Size 8193 blocks (first block 18)
    Journal Max transaction length 1024
    inode generation number: 0
    UUID: e20e2dc1-7277-4ab1-930c-038e54548540
    ATTENTION: YOU SHOULD REBOOT AFTER FDISK!
    ALL DATA WILL BE LOST ON ‘/dev/sda3′!
    Continue (y/n):y
    Initializing journal - 0%….20%….40%….60%….80%….100%
    Syncing..ok
    ReiserFS is successfully created on /dev/sda3.

    linux-1reo:~ #
</code></pre>

<p>Как только размер будет отформатирован, вы можете примонтировать и
использовать ваш вновь созданный раздел:</p>

<pre><code>    linux-1reo:~ # mount /dev/sda6 /media/partnew
</code></pre>

<p><strong>Заключение</strong></p>

<p>После монтирования созданного и отформатированного раздела вы можете хранить
ваши файлы на этом разделе безо всяких пробле, вы можете также добавить ваш
новый раздел в файл /etc/fstab для того, чтобы ваш раздел монтировался после
каждой перезагрузки.</p>

<p><strong>Протестировано на:</strong></p>

<ul>
<li>SUSE Linux Enterprise Desktop 10</li>
<li>SUSE Linux Enterprise Server 10</li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Alexander 'Hrafn' Ivanov</span></span>

      








  


<time datetime="2009-03-03T00:00:00+03:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2009</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hrafn.me/2009/03/sozdanie-razdelov-s-pomoshhyu-fdisk" data-via="" data-counturl="http://hrafn.me/2009/03/sozdanie-razdelov-s-pomoshhyu-fdisk" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/2009/03/sled-10-sp2-addons-cd" title="Previous Post: SLED 10 SP2 Addons CD">&laquo; SLED 10 SP2 Addons CD</a>
      
      
        <a class="basic-alignment right articlenav" href="/2009/03/ssh-proxying" title="Next Post: SSH Proxying">SSH Proxying &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/04/chef-basics-search-and-databags">Основы Chef. Поиск и Data Bags</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/chef-basics-introduction-to-cookbooks">Основы Chef. Введение в "Поваренные книги"</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/chef-basics-core-components">Основы Chef. Базовые компоненты</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/chef-basics-architecture">Основы Chef. Введение в архитектуру</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/about-blog-design">Немного про дизайн</a>
      </li>
    
  </ul>
</section>




<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/103291489173191931572?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Alexander 'Hrafn' Ivanov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
