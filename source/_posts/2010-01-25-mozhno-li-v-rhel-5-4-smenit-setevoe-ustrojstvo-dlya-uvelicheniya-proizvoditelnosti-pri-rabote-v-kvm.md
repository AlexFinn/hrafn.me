---
layout: post
title: '[RH Knowledgebase] Можно ли в RHEL 5.4 сменить сетевое устройство для увеличения производительности при работе в KVM'
author: hrafn
published: true
date: 2010-01-25T11:23:14+0000
permalink: /2010/01/mozhno-li-v-rhel-5-4-smenit-setevoe-ustrojstvo-dlya-uvelicheniya-proizvoditelnosti-pri-rabote-v-kvm
comments: true
categories:
- rhel
- kvm
- virtualization
- network
- translate
---

Это очередной перевод, на сей раз следующей заметки с Red Hat Knowledgebase: [http://kbase.redhat.com/faq/docs/DOC-19032](http://kbase.redhat.com/faq/docs/DOC-19032)

**Проблема**

По умолчанию, при создании виртуальных машин KVM в Red Hat Enterprise Linux
5.4 используется виртуальный сетевой контроллер Realtek 8139 (rtl8139). В
большинстве окружений rtl8139 работает прекрасно, но в некоторых сетях,
например, 10 GigE (10 Gigabit Ethernet), его использование может привести к
падению производительности.

<!--more-->

**Решение**

Необходимо переключиться на другой тип виртуального сетевого адаптера,
например, Intel PRO/1000 (e1000) или virtio (виртуальный драйвер ввода/вывода,
который может общаться с гипервизором).

Для переключения на e1000:

  1. Остановить гостевую систему.
  2. Отредактировать определения гостевой системы с помощью инструмента командной строки virsh:

			virsh edit <GUEST>

  3. Найдите раздел относящийся к сетевому интерфейсу и добавьте строку с описанием модели, как показано ниже:

			<interface type='network'>
			...
			<model type='e1000' />
			</interface>'

  4. Сохраните изменения и выйдете из текстового редактора.
  5. Заново запустите гостевую систему.

Производительность должна серьезно улучшиться при использовании драйвера
virtio.

